---
layout: default
title: "copilot-instructions.md 的重要發現：限制與規則的力量"
date: 2025-10-02
categories: [教學心得, 技術分享, AI]
tags: [GitHub Copilot, 教學, 提示工程, 工作流程, 最佳實踐]
description: "在準備教學內容時，我深刻體會到預先定義「不能怎麼做」的重要性，遠勝於只說明「想要什麼結果」。透過 copilot-instructions.md 和 AGENTS.md 設定明確限制，可以避免 AI 進入雷區，大幅提升協作效率。"
---

# copilot-instructions.md 的重要發現：限制與規則的力量

## 緣起：準備教學內容時的頓悟

最近在準備教學內容時，我有了一個重要的發現。過去使用 GitHub Copilot 時，我總是專注於告訴它「我要什麼樣的結果」，但往往會遇到 AI 產出不符預期、甚至走偏方向的情況。直到開始認真撰寫 `copilot-instructions.md`，我才意識到：

**一開始就把限制與規則寫清楚，遠比不斷修正結果來得重要。**

這不只是關於「不能怎麼做」，更是關於如何建立一個可預測、可信賴的 AI 協作環境。特別是在準備教學內容這種需要高度精確性的場景中，這點更是至關重要。

## 問題的本質：為什麼需要明確的限制？

### 正面表述 vs 負面限制

我們習慣用正面的方式表達需求：
- ✅ 「請幫我寫一個 Python 函式」
- ✅ 「請產生一份教學範例」
- ✅ 「請協助我規劃課程大綱」

但這樣的表述往往缺少了一個關鍵元素：**邊界**。

AI 在沒有明確邊界的情況下，可能會：
- 使用你不熟悉的第三方套件
- 採用過於複雜或過於簡化的實作方式
- 產生與你的教學風格不符的內容
- 修改你不希望被改動的檔案
- 引入你的學生尚未學過的概念

這些都是「雷區」——看似合理，但在你的特定情境中是不適合的選擇。

### 教學場景的特殊性

準備教學內容時，這個問題特別明顯：

**教學是一個高度情境依賴的活動。**

舉例來說：
- 你正在教 Python 基礎，學生還不懂 list comprehension，但 AI 可能會生成使用這個技巧的範例
- 你希望範例程式碼簡單易懂，但 AI 可能會追求「最佳實踐」而使用複雜的設計模式
- 你需要循序漸進的教學步驟，但 AI 可能會跳過中間過程，直接給出最終解答

這些情況下，如果沒有事先設定好限制，你會花費大量時間在「修正」和「重新生成」上，反而降低了效率。

## 深入探討：「不能做」比「想要什麼」更重要

### 限制創造了清晰的操作空間

想像一個場景：你給 AI 一個空白畫布，說「畫一幅美麗的風景畫」。AI 可能畫出任何東西——山、海、森林、城市⋯⋯

但如果你說：
- 「不要畫人物」
- 「不要使用超過三種顏色」
- 「不要畫現代建築」

突然間，AI 的創作空間變得更加聚焦。這些限制不是在扼殺創意，而是在**引導創意往你想要的方向發展**。

### 限制減少了雙方的溝通成本

每一次 AI 產出不符預期的結果，你都需要：
1. 識別問題所在
2. 重新表述需求
3. 等待新的產出
4. 再次檢查結果

這是一個耗時的迭代過程。

但如果你在一開始就設定好限制：
- 「不要修改 authentication.js」
- 「不要使用 async/await（學生還沒學到）」
- 「所有範例都要包含詳細註解」

那麼 AI 的第一次產出，就有更高的機會符合你的需求。

### 實際案例：我的經驗

在準備一堂 Python 課程時，我原本這樣提示 Copilot：

> 「請幫我建立一個檔案處理的範例程式」

結果 AI 生成了使用 `pathlib`、`contextlib`、type hints 和 exception handling 的「完美」程式碼。但問題是：我的學生才剛學完基本的 `open()` 和 `read()`！

後來我在 `copilot-instructions.md` 中加入：

```markdown
## 教學內容限制
- 不使用學生尚未學習的進階語法（如 list comprehension、generator、decorator）
- 不使用第三方套件，僅使用標準函式庫的基礎功能
- 所有範例都要從最基礎的方式實作，避免「一步到位」的解法
- 程式碼註解要詳細解釋每一步的目的
```

再次請求後，AI 生成的程式碼變成：

```python
# 開啟檔案並讀取內容
file = open('data.txt', 'r')
content = file.read()
print(content)
file.close()

# 說明：記得要關閉檔案，避免資源洩漏
```

這才是我需要的教學範例！

## 實踐經驗：copilot-instructions.md 的設計原則

根據我的使用經驗，一份好的 `copilot-instructions.md` 應該包含：

### 1. 明確的禁止項目

```markdown
## 禁止事項
- ❌ 不要修改已存在且運作正常的核心檔案
- ❌ 不要引入未在 requirements.txt 中的新依賴
- ❌ 不要使用學生尚未學過的進階語法
- ❌ 不要跳過中間步驟，直接給出最終解答
```

### 2. 情境化的約束條件

```markdown
## 教學情境約束
當建立教學範例時：
- 假設學生只學過基礎語法（變數、條件、迴圈、函式）
- 每個範例都要能獨立執行，不依賴其他檔案
- 註解要解釋「為什麼這樣做」，而不只是「做了什麼」
```

### 3. 工作範圍的界定

```markdown
## 工作範圍限制
- 所有教學範例放在 `examples/` 目錄
- 不要修改 `src/` 目錄中的生產程式碼
- 文件更新限於 `docs/tutorials/` 目錄
```

### 4. 品質標準的規範

```markdown
## 程式碼品質要求
- 變數命名要清晰易懂，避免縮寫
- 每個函式都要有 docstring 說明
- 遵循 PEP 8 規範（但優先考慮可讀性）
```

## 進階技巧：AGENTS.md（chatmode）讓一切更簡單

GitHub Copilot 的 chatmode 功能（透過 `.chatmode.md` 檔案）讓這件事更加方便。

### 什麼是 chatmode？

chatmode 允許你為特定的工作流程建立專屬的 AI agent，每個 agent 都有自己的：
- 角色定義
- 工作流程
- 限制條件
- 可用工具

### 實際範例：教學內容產生器

我在專案中建立了 `.github/chatmodes/teaching-assistant.chatmode.md`：

```markdown
---
description: '教學內容產生助理：適合初學者的範例生成'
tools: ['edit', 'fetch', 'think']
---

# 教學內容產生助理

## 角色定義
你是一個專注於產生初學者友善教學內容的助理。

## 核心原則
1. **簡單優於複雜**：永遠選擇最簡單的實作方式
2. **循序漸進**：不跳步，不假設學生已有進階知識
3. **解釋導向**：每個範例都要詳細解釋原理

## 嚴格限制
- ❌ 禁止使用進階語法（裝飾器、生成器、metaclass 等）
- ❌ 禁止使用第三方套件（除非明確要求）
- ❌ 禁止一次引入多個新概念
- ❌ 禁止省略中間步驟

## 範例格式
每個範例都要包含：
1. 問題說明
2. 解決思路
3. 逐步實作
4. 完整程式碼
5. 執行結果
6. 延伸思考
```

### chatmode 的優勢

有了 chatmode，我可以：

1. **快速切換情境**：教學模式 vs 生產模式，一鍵切換
2. **工作流程自動化**：agent 自動遵循預設的工作流程
3. **團隊協作**：其他教師可以使用相同的 agent，產生一致風格的教學內容
4. **持續改進**：在 chatmode 檔案中累積最佳實踐

## 實用技巧總結

基於我的實踐經驗，以下是一些實用建議：

### 1. 從限制開始，而非需求

**不好的做法：**
```
請幫我寫一個資料處理函式
（然後花時間修正各種不符需求的產出）
```

**好的做法：**
```
請幫我寫一個資料處理函式

限制：
- 不使用 pandas 或任何第三方套件
- 不使用 lambda 或 list comprehension
- 所有步驟都要拆分成獨立的變數
- 每行程式碼都要有註解
```

### 2. 明確定義「雷區」

列出你絕對不希望 AI 碰觸的部分：
- 不要修改的檔案
- 不要使用的技術
- 不要改變的架構

### 3. 提供正反範例

在 instructions 中加入：
```markdown
## 範例對比

❌ 不要這樣：
```python
data = [x**2 for x in range(10) if x % 2 == 0]
```

✅ 要這樣：
```python
# 找出偶數並計算平方
result = []
for num in range(10):
    if num % 2 == 0:  # 檢查是否為偶數
        square = num ** 2
        result.append(square)
data = result
```
```

### 4. 定期更新和精煉

`copilot-instructions.md` 不是一次性的文件。隨著你的使用：
- 記錄 AI 常犯的錯誤，加入限制條件
- 發現有效的約束模式，加入最佳實踐
- 調整規則的嚴格程度，找到最佳平衡

## 總結與反思

回顧這段探索歷程，我最大的體悟是：

**與 AI 協作，就像教育一個學生。你不能只告訴他「考 100 分」，而要明確告訴他「這些是考試範圍」、「這些題型不會考」、「這些是一定會錯的陷阱」。**

`copilot-instructions.md` 和 `AGENTS.md`（chatmode）的本質，就是在建立這樣的「教學框架」。它們讓 AI 知道：
- 你的期待是什麼
- 你的底線在哪裡
- 你希望的工作方式是什麼

當這些限制與規則明確後，AI 就能在這個框架內發揮創意，產生真正符合你需求的內容。你不再需要花時間「修正」，而是專注在「創造」上。

對於準備教學內容的我來說，這個發現特別寶貴。教學是一個需要高度精確性和適當性的工作——你必須確保每個範例都適合學生的程度，每個解釋都清晰易懂。透過預先設定好限制與規則，我可以更有信心地使用 AI 協助，知道它產生的內容不會「過頭」或「不足」。

### 下一步建議

如果你也在使用 GitHub Copilot，我建議你：

1. **立即建立 `copilot-instructions.md`**：即使只是簡單幾條規則也好
2. **從你最常遇到的問題開始**：AI 總是做錯什麼？把它加入禁止清單
3. **試試看 chatmode**：為你的常見工作流程建立專屬 agent
4. **持續優化**：把 instructions 當作活文件，不斷精煉

記住：好的限制不是束縛，而是方向。它們讓 AI 的創造力能夠精準地對準你的目標。

---

*你在使用 Copilot 時遇到過什麼「雷區」？歡迎分享你的經驗！*
